import{_ as r,I as d,c as a,o as k,j as i,ad as p,a as t,J as o,w as l}from"./chunks/framework.B-DvQ9Pq.js";const K=JSON.parse('{"title":"依赖优化选项","description":"","frontmatter":{"head":[["link",{"rel":"canonical","href":"https://vite.dev/config/dep-optimization-options"}],["meta",{"property":"og:title","content":"依赖优化选项"}]]},"headers":[],"relativePath":"config/dep-optimization-options.md","filePath":"config/dep-optimization-options.md"}'),h={name:"config/dep-optimization-options.md"},u={id:"optimizedeps-entries",tabindex:"-1"},g={id:"optimizedeps-exclude",tabindex:"-1"},E={class:"warning custom-block"},m={class:"language-js"},y={class:"shiki shiki-themes github-light github-dark twoslash lsp",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},f={class:"line"},b={style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},v={class:"line"},C={style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},D={class:"line"},F={style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},z={id:"optimizedeps-include",tabindex:"-1"},w={class:"language-js"},A={class:"shiki shiki-themes github-light github-dark twoslash lsp",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},T={class:"line"},x={style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},B={class:"line"},S={style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},P={class:"line"},V={style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},I={id:"optimizedeps-esbuild-options",tabindex:"-1"},j={id:"optimizedeps-force",tabindex:"-1"},O={id:"optimizedeps-no-discovery",tabindex:"-1"},N={id:"optimizedeps-holduntilcrawlend",tabindex:"-1"},U={id:"optimizedeps-disabled",tabindex:"-1"},J={id:"optimizedeps-needsinterop",tabindex:"-1"};function R($,s,M,G,W,q){const e=d("NonInheritBadge"),n=d("v-menu");return k(),a("div",null,[s[77]||(s[77]=i("h1",{id:"dep-optimization-options",tabindex:"-1"},[t("依赖优化选项 "),i("a",{class:"header-anchor",href:"#dep-optimization-options","aria-label":"Permalink to “依赖优化选项”"},"​")],-1)),s[78]||(s[78]=i("ul",null,[i("li",null,[i("strong",null,"相关内容："),t(),i("a",{href:"/guide/dep-pre-bundling.html"},"依赖预构建")])],-1)),s[79]||(s[79]=i("p",null,"除非另有说明，本节中的选项仅适用于依赖优化器，该优化器仅在开发环境中使用。",-1)),i("h2",u,[s[0]||(s[0]=t("optimizeDeps.entries ",-1)),o(e),s[1]||(s[1]=t()),s[2]||(s[2]=i("a",{class:"header-anchor",href:"#optimizedeps-entries","aria-label":"Permalink to “optimizeDeps.entries”"},"​",-1))]),s[80]||(s[80]=p("",3)),i("h2",g,[s[3]||(s[3]=t("optimizeDeps.exclude ",-1)),o(e),s[4]||(s[4]=t()),s[5]||(s[5]=i("a",{class:"header-anchor",href:"#optimizedeps-exclude","aria-label":"Permalink to “optimizeDeps.exclude”"},"​",-1))]),s[81]||(s[81]=i("ul",null,[i("li",null,[i("strong",null,"类型："),t(),i("code",null,"string[]")])],-1)),s[82]||(s[82]=i("p",null,"在预构建中强制排除的依赖项。",-1)),i("div",E,[s[30]||(s[30]=i("p",{class:"custom-block-title"},"CommonJS",-1)),s[31]||(s[31]=i("p",null,[t("CommonJS 的依赖不应该排除在优化外。如果一个 ESM 依赖被排除在优化外，但是却有一个嵌套的 CommonJS 依赖，则应该为该 CommonJS 依赖添加 "),i("code",null,"optimizeDeps.include"),t("。例如：")],-1)),i("div",m,[s[28]||(s[28]=i("button",{title:"Copy Code",class:"copy"},null,-1)),s[29]||(s[29]=i("span",{class:"lang"},"js",-1)),i("pre",y,[i("code",null,[i("span",f,[s[8]||(s[8]=i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"export",-1)),s[9]||(s[9]=i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," default",-1)),s[10]||(s[10]=i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," ",-1)),i("span",b,[o(n,{class:"twoslash-hover","popper-class":"shiki twoslash-floating vp-copy-ignore",theme:"twoslash"},{popper:l(({})=>[...s[6]||(s[6]=[i("span",{class:"twoslash-popup-container vp-copy-ignore"},[i("code",{class:"twoslash-popup-code"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"function"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defineConfig"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"config"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UserConfig"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UserConfig"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," overloads"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i("div",{class:"twoslash-popup-docs vp-doc"},[i("p",null,`Type helper to make it easier to use vite.config.ts
accepts a direct`),t(`
`),i("p",null,"UserConfig"),t(`
`),i("p",null,`object, or a function that returns it.
The function receives a`),t(`
`),i("p",null,"ConfigEnv"),t(`
`),i("p",null,"object.")])],-1)])]),default:l(()=>[s[7]||(s[7]=i("span",null,"defineConfig",-1))]),_:1})]),s[11]||(s[11]=i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"({",-1))]),s[22]||(s[22]=t(`
`,-1)),i("span",v,[s[14]||(s[14]=i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ",-1)),i("span",C,[o(n,{class:"twoslash-hover","popper-class":"shiki twoslash-floating vp-copy-ignore",theme:"twoslash"},{popper:l(({})=>[...s[12]||(s[12]=[i("span",{class:"twoslash-popup-container vp-copy-ignore"},[i("code",{class:"twoslash-popup-code"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"UserConfig.optimizeDeps"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"?:"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DepOptimizationOptions "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," undefined")]),i("div",{class:"twoslash-popup-docs vp-doc"},[i("p",null,"Dep optimization options")])],-1)])]),default:l(()=>[s[13]||(s[13]=i("span",null,"optimizeDeps",-1))]),_:1})]),s[15]||(s[15]=i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": {",-1))]),s[23]||(s[23]=t(`
`,-1)),i("span",D,[s[18]||(s[18]=i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ",-1)),i("span",F,[o(n,{class:"twoslash-hover","popper-class":"shiki twoslash-floating vp-copy-ignore",theme:"twoslash"},{popper:l(({})=>[...s[16]||(s[16]=[i("span",{class:"twoslash-popup-container vp-copy-ignore"},[i("code",{class:"twoslash-popup-code"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DepOptimizationConfig.include"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"?:"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," string[] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," undefined")]),i("div",{class:"twoslash-popup-docs vp-doc"},[i("p",null,`Force optimize listed dependencies (must be resolvable import paths,
cannot be globs).`)])],-1)])]),default:l(()=>[s[17]||(s[17]=i("span",null,"include",-1))]),_:1})]),s[19]||(s[19]=i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": [",-1)),s[20]||(s[20]=i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'esm-dep > cjs-dep'",-1)),s[21]||(s[21]=i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"],",-1))]),s[24]||(s[24]=t(`
`,-1)),s[25]||(s[25]=i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  },")],-1)),s[26]||(s[26]=t(`
`,-1)),s[27]||(s[27]=i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"})")],-1))])])])]),i("h2",z,[s[32]||(s[32]=t("optimizeDeps.include ",-1)),o(e),s[33]||(s[33]=t()),s[34]||(s[34]=i("a",{class:"header-anchor",href:"#optimizedeps-include","aria-label":"Permalink to “optimizeDeps.include”"},"​",-1))]),s[83]||(s[83]=i("ul",null,[i("li",null,[i("strong",null,"类型："),t(),i("code",null,"string[]")])],-1)),s[84]||(s[84]=i("p",null,[t("默认情况下，不在 "),i("code",null,"node_modules"),t(" 中的，链接的包不会被预构建。使用此选项可强制预构建链接的包。")],-1)),s[85]||(s[85]=i("p",null,[i("strong",null,"实验性："),t(" 如果你使用的是一个有很多深层导入的库，你也可以指定一个尾部的 glob 模式来一次性地预构建所有深层导入。这将避免在使用新的深层导入时不断地预构建。可以在此 "),i("a",{href:"https://github.com/vitejs/vite/discussions/15833",target:"_blank",rel:"noreferrer"},"提供反馈"),t("。例如：")],-1)),i("div",w,[s[57]||(s[57]=i("button",{title:"Copy Code",class:"copy"},null,-1)),s[58]||(s[58]=i("span",{class:"lang"},"js",-1)),i("pre",A,[i("code",null,[i("span",T,[s[37]||(s[37]=i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"export",-1)),s[38]||(s[38]=i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," default",-1)),s[39]||(s[39]=i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," ",-1)),i("span",x,[o(n,{class:"twoslash-hover","popper-class":"shiki twoslash-floating vp-copy-ignore",theme:"twoslash"},{popper:l(({})=>[...s[35]||(s[35]=[i("span",{class:"twoslash-popup-container vp-copy-ignore"},[i("code",{class:"twoslash-popup-code"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"function"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defineConfig"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"config"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UserConfig"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UserConfig"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," overloads"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i("div",{class:"twoslash-popup-docs vp-doc"},[i("p",null,`Type helper to make it easier to use vite.config.ts
accepts a direct`),t(`
`),i("p",null,"UserConfig"),t(`
`),i("p",null,`object, or a function that returns it.
The function receives a`),t(`
`),i("p",null,"ConfigEnv"),t(`
`),i("p",null,"object.")])],-1)])]),default:l(()=>[s[36]||(s[36]=i("span",null,"defineConfig",-1))]),_:1})]),s[40]||(s[40]=i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"({",-1))]),s[51]||(s[51]=t(`
`,-1)),i("span",B,[s[43]||(s[43]=i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ",-1)),i("span",S,[o(n,{class:"twoslash-hover","popper-class":"shiki twoslash-floating vp-copy-ignore",theme:"twoslash"},{popper:l(({})=>[...s[41]||(s[41]=[i("span",{class:"twoslash-popup-container vp-copy-ignore"},[i("code",{class:"twoslash-popup-code"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"UserConfig.optimizeDeps"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"?:"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DepOptimizationOptions "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," undefined")]),i("div",{class:"twoslash-popup-docs vp-doc"},[i("p",null,"Dep optimization options")])],-1)])]),default:l(()=>[s[42]||(s[42]=i("span",null,"optimizeDeps",-1))]),_:1})]),s[44]||(s[44]=i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": {",-1))]),s[52]||(s[52]=t(`
`,-1)),i("span",P,[s[47]||(s[47]=i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ",-1)),i("span",V,[o(n,{class:"twoslash-hover","popper-class":"shiki twoslash-floating vp-copy-ignore",theme:"twoslash"},{popper:l(({})=>[...s[45]||(s[45]=[i("span",{class:"twoslash-popup-container vp-copy-ignore"},[i("code",{class:"twoslash-popup-code"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DepOptimizationConfig.include"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"?:"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," string[] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," undefined")]),i("div",{class:"twoslash-popup-docs vp-doc"},[i("p",null,`Force optimize listed dependencies (must be resolvable import paths,
cannot be globs).`)])],-1)])]),default:l(()=>[s[46]||(s[46]=i("span",null,"include",-1))]),_:1})]),s[48]||(s[48]=i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": [",-1)),s[49]||(s[49]=i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'my-lib/components/**/*.vue'",-1)),s[50]||(s[50]=i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"],",-1))]),s[53]||(s[53]=t(`
`,-1)),s[54]||(s[54]=i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  },")],-1)),s[55]||(s[55]=t(`
`,-1)),s[56]||(s[56]=i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"})")],-1))])])]),i("h2",I,[s[59]||(s[59]=t("optimizeDeps.esbuildOptions ",-1)),o(e),s[60]||(s[60]=t()),s[61]||(s[61]=i("a",{class:"header-anchor",href:"#optimizedeps-esbuild-options","aria-label":"Permalink to “optimizeDeps.esbuildOptions”"},"​",-1))]),s[86]||(s[86]=p("",4)),i("h2",j,[s[62]||(s[62]=t("optimizeDeps.force ",-1)),o(e),s[63]||(s[63]=t()),s[64]||(s[64]=i("a",{class:"header-anchor",href:"#optimizedeps-force","aria-label":"Permalink to “optimizeDeps.force”"},"​",-1))]),s[87]||(s[87]=i("ul",null,[i("li",null,[i("strong",null,"类型："),t(),i("code",null,"boolean")])],-1)),s[88]||(s[88]=i("p",null,[t("设置为 "),i("code",null,"true"),t(" 可以强制依赖预构建，而忽略之前已经缓存过的、已经优化过的依赖。")],-1)),i("h2",O,[s[65]||(s[65]=t("optimizeDeps.noDiscovery ",-1)),o(e),s[66]||(s[66]=t()),s[67]||(s[67]=i("a",{class:"header-anchor",href:"#optimizedeps-no-discovery","aria-label":"Permalink to “optimizeDeps.noDiscovery”"},"​",-1))]),s[89]||(s[89]=p("",2)),i("h2",N,[s[68]||(s[68]=t("optimizeDeps.holdUntilCrawlEnd ",-1)),o(e),s[69]||(s[69]=t()),s[70]||(s[70]=i("a",{class:"header-anchor",href:"#optimizedeps-holduntilcrawlend","aria-label":"Permalink to “optimizeDeps.holdUntilCrawlEnd”"},"​",-1))]),s[90]||(s[90]=p("",2)),i("h2",U,[s[71]||(s[71]=t("optimizeDeps.disabled ",-1)),o(e),s[72]||(s[72]=t()),s[73]||(s[73]=i("a",{class:"header-anchor",href:"#optimizedeps-disabled","aria-label":"Permalink to “optimizeDeps.disabled”"},"​",-1))]),s[91]||(s[91]=p("",4)),i("h2",J,[s[74]||(s[74]=t("optimizeDeps.needsInterop ",-1)),o(e),s[75]||(s[75]=t()),s[76]||(s[76]=i("a",{class:"header-anchor",href:"#optimizedeps-needsinterop","aria-label":"Permalink to “optimizeDeps.needsInterop”"},"​",-1))]),s[92]||(s[92]=i("ul",null,[i("li",null,[i("strong",null,"实验性")]),i("li",null,[i("strong",null,"类型:"),t(),i("code",null,"string[]")])],-1)),s[93]||(s[93]=i("p",null,[t("当导入这些依赖项时，会强制 ESM 转换。Vite 能够正确检测到依赖项是否需要转换处理（interop），因此通常不需要使用此选项。然而，不同的依赖项组合可能导致其中一些包以不同方式预构建。将这些包添加到 "),i("code",null,"needsInterop"),t(" 中可以通过避免重新加载整个页面来加快冷启动速度。如果某个依赖项符合此情况，Vite 将抛出警告，建议你在配置中添加该包名。")],-1))])}const L=r(h,[["render",R]]);export{K as __pageData,L as default};
