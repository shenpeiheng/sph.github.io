<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä» v4 è¿ç§» | ç–¯çŒªAI</title>
    <meta name="description" content="ç–¯çŒªAI">
    <meta name="generator" content="VitePress v2.0.0-alpha.7">
    <link rel="preload stylesheet" href="/assets/style.CPYNGDYz.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.BJ2WMDaA.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.DIB2yIaC.js">
    <link rel="modulepreload" href="/assets/chunks/framework.aV7AXeQK.js">
    <link rel="modulepreload" href="/assets/guide_migration-from-v4.md.DlycDAjI.lean.js">
    <link rel="icon" type="image/svg+xml" href="/logo.svg">
    <link rel="alternate" type="application/rss+xml" href="/blog.rss">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&amp;family=Manrope:wght@600&amp;family=IBM+Plex+Mono:wght@400&amp;display=swap" as="style">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&amp;family=Manrope:wght@600&amp;family=IBM+Plex+Mono:wght@400&amp;display=swap">
    <script>(()=>{const n=(s,t,_=!1)=>{const e=localStorage.getItem(s);(e?e!=="false":_)&&document.documentElement.classList.add(t)};window.__VITE_BANNER_ID__="viteplusannouncement",n(`vite-docs-banner-${__VITE_BANNER_ID__}`,"banner-dismissed")})();</script>
    <link rel="me" href="https://m.webtoo.ls/@vite">
    <meta property="og:type" content="website">
    <meta property="og:title" content="ä» v4 è¿ç§»">
    <meta property="og:image" content="https://vite.dev/og-image.jpg">
    <meta property="og:url" content="https://vite.dev">
    <meta property="og:description" content="Next Generation Frontend Tooling">
    <meta property="og:site_name" content="vitejs">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@vite_js">
    <meta name="theme-color" content="#646cff">
    <script src="https://cdn.usefathom.com/script.js" data-site="TPLGJZGR" data-spa="auto" defer></script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <link rel="canonical" href="https://vite.dev/guide/migration-from-v4">
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-f1c65288><!--[--><div class="banner" data-v-d203e68b><svg width="100" height="20" viewBox="0 0 100 20" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d203e68b><text x="50" y="15" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="#6254FE" data-v-d203e68b> CRAZY PIG + </text></svg><div class="vt-banner-text" data-v-d203e68b><p style="display:inline-block;" data-v-d203e68b>è¦æƒ³å¯Œ | å…ˆå‘ç–¯ | ai</p><a target="_top" class="vt-primary-action" href="JavaScript:void(0)" data-v-d203e68b> Learn more </a></div><button aria-label="close" data-v-d203e68b><svg class="close" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" data-v-d203e68b><path d="M18.9,10.9h-6v-6c0-0.6-0.4-1-1-1s-1,0.4-1,1v6h-6c-0.6,0-1,0.4-1,1s0.4,1,1,1h6v6c0,0.6,0.4,1,1,1s1-0.4,1-1v-6h6c0.6,0,1-0.4,1-1S19.5,10.9,18.9,10.9z" data-v-d203e68b></path></svg></button><div class="glow glow--purple" data-v-d203e68b></div><div class="glow glow--blue" data-v-d203e68b></div></div><!--]--><!--[--><span tabindex="-1" data-v-6fe7cbee></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-6fe7cbee>Skip to content</a><!--]--><!----><header class="VPNav" data-v-f1c65288 data-v-c547271b><div class="VPNavBar" data-v-c547271b data-v-9a3a7d9c><div class="wrapper" data-v-9a3a7d9c><div class="container" data-v-9a3a7d9c><div class="title" data-v-9a3a7d9c><div class="VPNavBarTitle" data-v-9a3a7d9c data-v-cf4a9d3a><a class="title" href="/" data-v-cf4a9d3a><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.svg" alt data-v-ba1c87f7><!--]--><span data-v-cf4a9d3a>ç–¯çŒªAI</span><!--[--><!--]--></a></div></div><div class="content" data-v-9a3a7d9c><div class="content-body" data-v-9a3a7d9c><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9a3a7d9c><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">æœç´¢</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9a3a7d9c data-v-f891e358><span id="main-nav-aria-label" class="visually-hidden" data-v-f891e358> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-f891e358 data-v-6d43398b><!--[--><span data-v-6d43398b>ğŸŒˆé¦–é¡µ</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/deploy/" tabindex="0" data-v-f891e358 data-v-6d43398b><!--[--><span data-v-6d43398b>ğŸš€å¸®åŠ©æ–‡æ¡£</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f891e358 data-v-fd72bfee><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-fd72bfee><span class="text" data-v-fd72bfee><!----><span data-v-fd72bfee>ğŸ› ï¸ç›¸å…³é“¾æ¥</span><span class="vpi-chevron-down text-icon" data-v-fd72bfee></span></span></button><div class="menu" data-v-fd72bfee><div class="VPMenu" data-v-fd72bfee data-v-68d0c963><div class="items" data-v-68d0c963><!--[--><!--[--><div class="VPMenuLink" data-v-68d0c963 data-v-919a3c81><a class="VPLink link" href="/team.html" data-v-919a3c81><!--[--><span data-v-919a3c81>å›¢é˜Ÿæˆå‘˜</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-68d0c963 data-v-919a3c81><a class="VPLink link" href="/blog.html" data-v-919a3c81><!--[--><span data-v-919a3c81>æœ€æ–°åšå®¢</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-68d0c963 data-v-919a3c81><a class="VPLink link" href="/releases.html" data-v-919a3c81><!--[--><span data-v-919a3c81>å‘å¸ƒç­–ç•¥</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-68d0c963 data-v-919a3c81><a class="VPLink link vp-external-link-icon" href="https://www.youtube.com" target="_blank" rel="noreferrer" data-v-919a3c81><!--[--><span data-v-919a3c81>youtube</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-9a3a7d9c data-v-61668abb data-v-fd72bfee><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-fd72bfee><span class="text" data-v-fd72bfee><span class="vpi-languages option-icon" data-v-fd72bfee></span><!----><span class="vpi-chevron-down text-icon" data-v-fd72bfee></span></span></button><div class="menu" data-v-fd72bfee><div class="VPMenu" data-v-fd72bfee data-v-68d0c963><!----><!--[--><!--[--><div class="items" data-v-61668abb><p class="title" data-v-61668abb>ç®€ä½“ä¸­æ–‡</p><!--[--><div class="VPMenuLink" data-v-61668abb data-v-919a3c81><a class="VPLink link active" href="/guide/migration-from-v4.html" data-v-919a3c81><!--[--><span data-v-919a3c81>English</span><!--]--></a></div><div class="VPMenuLink" data-v-61668abb data-v-919a3c81><a class="VPLink link active" href="/guide/migration-from-v4.html" data-v-919a3c81><!--[--><span data-v-919a3c81>æ—¥æœ¬èª</span><!--]--></a></div><div class="VPMenuLink" data-v-61668abb data-v-919a3c81><a class="VPLink link active" href="/guide/migration-from-v4.html" data-v-919a3c81><!--[--><span data-v-919a3c81>EspaÃ±ol</span><!--]--></a></div><div class="VPMenuLink" data-v-61668abb data-v-919a3c81><a class="VPLink link active" href="/guide/migration-from-v4.html" data-v-919a3c81><!--[--><span data-v-919a3c81>PortuguÃªs</span><!--]--></a></div><div class="VPMenuLink" data-v-61668abb data-v-919a3c81><a class="VPLink link active" href="/guide/migration-from-v4.html" data-v-919a3c81><!--[--><span data-v-919a3c81>í•œêµ­ì–´</span><!--]--></a></div><div class="VPMenuLink" data-v-61668abb data-v-919a3c81><a class="VPLink link active" href="/guide/migration-from-v4.html" data-v-919a3c81><!--[--><span data-v-919a3c81>Deutsch</span><!--]--></a></div><div class="VPMenuLink" data-v-61668abb data-v-919a3c81><a class="VPLink link active" href="/guide/migration-from-v4.html" data-v-919a3c81><!--[--><span data-v-919a3c81>ÙØ§Ø±Ø³ÛŒ</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-9a3a7d9c data-v-a90530ed><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-a90530ed data-v-5a93df26 data-v-295a837a><span class="check" data-v-295a837a><span class="icon" data-v-295a837a><!--[--><span class="vpi-sun sun" data-v-5a93df26></span><span class="vpi-moon moon" data-v-5a93df26></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9a3a7d9c data-v-5d6c9033 data-v-336bfc3d><!--[--><a class="VPSocialLink no-icon" href="https://github.com" aria-label="github" target="_blank" rel="noopener" data-v-336bfc3d data-v-59172608><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://gitee.com/" aria-label="gitee" target="_blank" rel="noopener" data-v-336bfc3d data-v-59172608><span class="vpi-social-gitee"></span></a><a class="VPSocialLink no-icon" href="https://linux.do/" aria-label="discourse" target="_blank" rel="noopener" data-v-336bfc3d data-v-59172608><span class="vpi-social-discourse"></span></a><a class="VPSocialLink no-icon" href="https://www.docker.com/" aria-label="docker" target="_blank" rel="noopener" data-v-336bfc3d data-v-59172608><span class="vpi-social-docker"></span></a><a class="VPSocialLink no-icon" href="https://www.google.com/" aria-label="google" target="_blank" rel="noopener" data-v-336bfc3d data-v-59172608><span class="vpi-social-google"></span></a><a class="VPSocialLink no-icon" href="https://x.com/" aria-label="x" target="_blank" rel="noopener" data-v-336bfc3d data-v-59172608><span class="vpi-social-x"></span></a><a class="VPSocialLink no-icon" href="https://elk.zone/" aria-label="mastodon" target="_blank" rel="noopener" data-v-336bfc3d data-v-59172608><span class="vpi-social-mastodon"></span></a><a class="VPSocialLink no-icon" href="https://dash.cloudflare.com/" aria-label="cloudflare" target="_blank" rel="noopener" data-v-336bfc3d data-v-59172608><span class="vpi-social-cloudflare"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9a3a7d9c data-v-04f138a5 data-v-fd72bfee><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-fd72bfee><span class="vpi-more-horizontal icon" data-v-fd72bfee></span></button><div class="menu" data-v-fd72bfee><div class="VPMenu" data-v-fd72bfee data-v-68d0c963><!----><!--[--><!--[--><div class="group translations" data-v-04f138a5><p class="trans-title" data-v-04f138a5>ç®€ä½“ä¸­æ–‡</p><!--[--><div class="VPMenuLink" data-v-04f138a5 data-v-919a3c81><a class="VPLink link active" href="/guide/migration-from-v4.html" data-v-919a3c81><!--[--><span data-v-919a3c81>English</span><!--]--></a></div><div class="VPMenuLink" data-v-04f138a5 data-v-919a3c81><a class="VPLink link active" href="/guide/migration-from-v4.html" data-v-919a3c81><!--[--><span data-v-919a3c81>æ—¥æœ¬èª</span><!--]--></a></div><div class="VPMenuLink" data-v-04f138a5 data-v-919a3c81><a class="VPLink link active" href="/guide/migration-from-v4.html" data-v-919a3c81><!--[--><span data-v-919a3c81>EspaÃ±ol</span><!--]--></a></div><div class="VPMenuLink" data-v-04f138a5 data-v-919a3c81><a class="VPLink link active" href="/guide/migration-from-v4.html" data-v-919a3c81><!--[--><span data-v-919a3c81>PortuguÃªs</span><!--]--></a></div><div class="VPMenuLink" data-v-04f138a5 data-v-919a3c81><a class="VPLink link active" href="/guide/migration-from-v4.html" data-v-919a3c81><!--[--><span data-v-919a3c81>í•œêµ­ì–´</span><!--]--></a></div><div class="VPMenuLink" data-v-04f138a5 data-v-919a3c81><a class="VPLink link active" href="/guide/migration-from-v4.html" data-v-919a3c81><!--[--><span data-v-919a3c81>Deutsch</span><!--]--></a></div><div class="VPMenuLink" data-v-04f138a5 data-v-919a3c81><a class="VPLink link active" href="/guide/migration-from-v4.html" data-v-919a3c81><!--[--><span data-v-919a3c81>ÙØ§Ø±Ø³ÛŒ</span><!--]--></a></div><!--]--></div><div class="group" data-v-04f138a5><div class="item appearance" data-v-04f138a5><p class="label" data-v-04f138a5>Appearance</p><div class="appearance-action" data-v-04f138a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-04f138a5 data-v-5a93df26 data-v-295a837a><span class="check" data-v-295a837a><span class="icon" data-v-295a837a><!--[--><span class="vpi-sun sun" data-v-5a93df26></span><span class="vpi-moon moon" data-v-5a93df26></span><!--]--></span></span></button></div></div></div><div class="group" data-v-04f138a5><div class="item social-links" data-v-04f138a5><div class="VPSocialLinks social-links-list" data-v-04f138a5 data-v-336bfc3d><!--[--><a class="VPSocialLink no-icon" href="https://github.com" aria-label="github" target="_blank" rel="noopener" data-v-336bfc3d data-v-59172608><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://gitee.com/" aria-label="gitee" target="_blank" rel="noopener" data-v-336bfc3d data-v-59172608><span class="vpi-social-gitee"></span></a><a class="VPSocialLink no-icon" href="https://linux.do/" aria-label="discourse" target="_blank" rel="noopener" data-v-336bfc3d data-v-59172608><span class="vpi-social-discourse"></span></a><a class="VPSocialLink no-icon" href="https://www.docker.com/" aria-label="docker" target="_blank" rel="noopener" data-v-336bfc3d data-v-59172608><span class="vpi-social-docker"></span></a><a class="VPSocialLink no-icon" href="https://www.google.com/" aria-label="google" target="_blank" rel="noopener" data-v-336bfc3d data-v-59172608><span class="vpi-social-google"></span></a><a class="VPSocialLink no-icon" href="https://x.com/" aria-label="x" target="_blank" rel="noopener" data-v-336bfc3d data-v-59172608><span class="vpi-social-x"></span></a><a class="VPSocialLink no-icon" href="https://elk.zone/" aria-label="mastodon" target="_blank" rel="noopener" data-v-336bfc3d data-v-59172608><span class="vpi-social-mastodon"></span></a><a class="VPSocialLink no-icon" href="https://dash.cloudflare.com/" aria-label="cloudflare" target="_blank" rel="noopener" data-v-336bfc3d data-v-59172608><span class="vpi-social-cloudflare"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9a3a7d9c data-v-b86a7766><span class="container" data-v-b86a7766><span class="top" data-v-b86a7766></span><span class="middle" data-v-b86a7766></span><span class="bottom" data-v-b86a7766></span></span></button></div></div></div></div><div class="divider" data-v-9a3a7d9c><div class="divider-line" data-v-9a3a7d9c></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-f1c65288 data-v-9392f0b5><div class="container" data-v-9392f0b5><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-9392f0b5 data-v-d7dcb12b><button data-v-d7dcb12b>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-f1c65288 data-v-38a1f8e9><div class="VPDoc has-aside" data-v-38a1f8e9 data-v-0cec5931><!--[--><!--]--><div class="container" data-v-0cec5931><div class="aside" data-v-0cec5931><div class="aside-curtain" data-v-0cec5931></div><div class="aside-container" data-v-0cec5931><div class="aside-content" data-v-0cec5931><div class="VPDocAside" data-v-0cec5931 data-v-8ba8f468><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-8ba8f468 data-v-0c111748><div class="content" data-v-0c111748><div class="outline-marker" data-v-0c111748></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-0c111748>æœ¬é¡µç›®å½•</div><ul class="VPDocOutlineItem root" data-v-0c111748 data-v-9311d4e9><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-8ba8f468></div><!--[--><!--[--><!--[--><!--[--><!--[--><a class="viteconf" href="https://www.youtube.com/playlist?list=PLqGQbXn_GDmkJaoykvHCUmXUPjhgH2bVr" target="_blank"><img width="22" height="22" src="/assets/viteconf.B8GG-UvL.svg" alt="ViteConf Logo"><span><p class="extra-info">Building Together</p><p class="heading">ViteConf 2025</p><p class="extra-info">View the replays</p></span></a><!----><!--]--><!--]--><!--]--><!--]--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-0cec5931><div class="content-container" data-v-0cec5931><!--[--><!--]--><main class="main" data-v-0cec5931><div style="position:relative;" class="vp-doc _guide_migration-from-v4" data-v-0cec5931><div><h1 id="migration-from-v4" tabindex="-1">ä» v4 è¿ç§» <a class="header-anchor" href="#migration-from-v4" aria-label="Permalink to â€œä» v4 è¿ç§»â€">â€‹</a></h1><h2 id="nodejs-support" tabindex="-1">Node.js æ”¯æŒ <a class="header-anchor" href="#nodejs-support" aria-label="Permalink to â€œNode.js æ”¯æŒâ€">â€‹</a></h2><p>Vite ä¸å†æ”¯æŒ Node.js 14 / 16 / 17 / 19ï¼Œå› ä¸ºå®ƒä»¬å·²ç»åˆ°äº† EOLã€‚ç°åœ¨éœ€è¦ Node.js 18 / 20+ã€‚</p><p>Some internal APIs have been removed due to changes in Vite&#39;s implementation. If you were relying on one of them, please create a <a href="https://github.com/vitejs/vite/issues/new?assignees=&amp;labels=enhancement%3A+pending+triage&amp;projects=&amp;template=feature_request.yml" target="_blank" rel="noreferrer">feature request</a>.</p><p>Vite ç°åœ¨ä½¿ç”¨ Rollup 4ï¼Œå®ƒä¹Ÿå¸¦æ¥äº†ä¸€äº›é‡å¤§çš„å˜åŒ–ï¼Œç‰¹åˆ«æ˜¯ï¼š</p><ul><li>å¯¼å…¥æ–­è¨€ï¼ˆ<code>assertions</code> å±æ€§ï¼‰å·²è¢«é‡å‘½åä¸ºå¯¼å…¥å±æ€§ï¼ˆ<code>attributes</code> å±æ€§ï¼‰ã€‚</li><li>ä¸å†æ”¯æŒ Acorn æ’ä»¶ã€‚</li><li>å¯¹äº Vite æ’ä»¶ï¼Œ<code>this.resolve</code> çš„ <code>skipSelf</code> é€‰é¡¹ç°åœ¨é»˜è®¤ä¸º <code>true</code>ã€‚</li><li>å¯¹äº Vite æ’ä»¶ï¼Œ<code>this.parse</code> ç°åœ¨åªæ”¯æŒ <code>allowReturnOutsideFunction</code> é€‰é¡¹ã€‚</li></ul><p>ä½ å¯ä»¥é˜…è¯» <a href="https://github.com/rollup/rollup/releases/tag/v4.0.0" target="_blank" rel="noreferrer">Rollup çš„å‘å¸ƒè¯´æ˜</a> ä¸­çš„ç ´åæ€§å˜æ›´ï¼Œäº†è§£åœ¨ <a href="/config/build-options.html#build-rollupoptions"><code>build.rollupOptions</code></a> ä¸­æ„å»ºç›¸å…³çš„å˜æ›´ã€‚</p><p>å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ TypeScriptï¼Œè¯·ç¡®ä¿è®¾ç½® <code>moduleResolution: &#39;bundler&#39;</code>ï¼ˆæˆ– <code>node16</code>/<code>nodenext</code>ï¼‰å› ä¸º Rollup 4 éœ€è¦å®ƒã€‚æˆ–è€…ä½ å¯ä»¥è®¾ç½® <code>skipLibCheck: true</code>ã€‚</p><h2 id="deprecate-cjs-node-api" tabindex="-1">åºŸå¼ƒ CJS Node API <a class="header-anchor" href="#deprecate-cjs-node-api" aria-label="Permalink to â€œåºŸå¼ƒ CJS Node APIâ€">â€‹</a></h2><p>CJS çš„ Node API å·²ç»è¢«åºŸå¼ƒã€‚å½“è°ƒç”¨ <code>require(&#39;vite&#39;)</code> æ—¶ï¼Œå°†ä¼šè®°å½•ä¸€ä¸ªåºŸå¼ƒè­¦å‘Šã€‚ä½ åº”è¯¥æ›´æ–°ä½ çš„æ–‡ä»¶æˆ–æ¡†æ¶æ¥å¯¼å…¥ Vite çš„ ESM æ„å»ºã€‚</p><p>åœ¨ä¸€ä¸ªåŸºç¡€çš„ Vite é¡¹ç›®ä¸­ï¼Œè¯·ç¡®ä¿ï¼š</p><ol><li><code>vite.config.js</code> é…ç½®æ–‡ä»¶çš„å†…å®¹ä½¿ç”¨ ESM è¯­æ³•ã€‚</li><li>æœ€è¿‘çš„ <code>package.json</code> æ–‡ä»¶ä¸­æœ‰ <code>&quot;type&quot;: &quot;module&quot;</code>ï¼Œæˆ–è€…ä½¿ç”¨ <code>.mjs</code>/<code>.mts</code> æ‰©å±•åï¼Œä¾‹å¦‚ <code>vite.config.mjs</code> æˆ–è€… <code>.vite.config.mts</code>ã€‚</li></ol><p>å¯¹äºå…¶ä»–é¡¹ç›®ï¼Œæœ‰å‡ ç§å¸¸è§çš„æ–¹æ³•ï¼š</p><ul><li><strong>é…ç½® ESM ä¸ºé»˜è®¤ï¼Œå¦‚æœéœ€è¦åˆ™é€‰æ‹© CJSï¼š</strong> åœ¨é¡¹ç›® <code>package.json</code> ä¸­æ·»åŠ  <code>&quot;type&quot;: &quot;module&quot;</code>ã€‚æ‰€æœ‰ <code>*.js</code> æ–‡ä»¶ç°åœ¨éƒ½è¢«è§£é‡Šä¸º ESMï¼Œå¹¶ä¸”éœ€è¦ä½¿ç”¨ ESM è¯­æ³•ã€‚ä½ å¯ä»¥å°†ä¸€ä¸ªæ–‡ä»¶é‡å‘½åä¸º <code>.cjs</code> æ‰©å±•åæ¥ç»§ç»­ä½¿ç”¨ CJSã€‚</li><li><strong>ä¿æŒ CJS ä¸ºé»˜è®¤ï¼Œå¦‚æœéœ€è¦åˆ™é€‰æ‹© ESMï¼š</strong> å¦‚æœé¡¹ç›® <code>package.json</code> æ²¡æœ‰ <code>&quot;type&quot;: &quot;module&quot;</code>ï¼Œæ‰€æœ‰ <code>*.js</code> æ–‡ä»¶éƒ½è¢«è§£é‡Šä¸º CJSã€‚ä½ å¯ä»¥å°†ä¸€ä¸ªæ–‡ä»¶é‡å‘½åä¸º <code>.mjs</code> æ‰©å±•åæ¥ä½¿ç”¨ ESMã€‚</li><li><strong>åŠ¨æ€å¯¼å…¥ Viteï¼š</strong> å¦‚æœä½ éœ€è¦ç»§ç»­ä½¿ç”¨ CJSï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>import(&#39;vite&#39;)</code> åŠ¨æ€å¯¼å…¥ Viteã€‚è¿™è¦æ±‚ä½ çš„ä»£ç å¿…é¡»åœ¨ä¸€ä¸ª <code>async</code> ä¸Šä¸‹æ–‡ä¸­ç¼–å†™ï¼Œä½†æ˜¯ç”±äº Vite çš„ API å¤§å¤šæ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥åº”è¯¥è¿˜æ˜¯å¯ä»¥ç®¡ç†çš„ã€‚</li></ul><p>æŸ¥çœ‹ <a href="/guide/troubleshooting.html#vite-cjs-node-api-deprecated">æ’é”™æŒ‡å—</a> è·å–æ›´å¤šä¿¡æ¯ã€‚</p><h2 id="rework-define-and-import-meta-env-replacement-strategy" tabindex="-1">é‡æ–°è®¾è®¡ <code>define</code> å’Œ <code>import.meta.env.*</code> çš„æ›¿æ¢ç­–ç•¥ <a class="header-anchor" href="#rework-define-and-import-meta-env-replacement-strategy" aria-label="Permalink to â€œé‡æ–°è®¾è®¡ define å’Œ import.meta.env.* çš„æ›¿æ¢ç­–ç•¥â€">â€‹</a></h2><p>åœ¨ Vite 4 ä¸­ï¼Œ<a href="/config/shared-options.html#define"><code>define</code></a> å’Œ <a href="/guide/env-and-mode.html#env-variables"><code>import.meta.env.*</code></a> ç‰¹æ€§åœ¨å¼€å‘å’Œæ„å»ºä¸­ä½¿ç”¨çš„æ˜¯ä¸åŒçš„æ›¿æ¢ç­–ç•¥ï¼š</p><ul><li>åœ¨å¼€å‘æ—¶ï¼Œè¿™ä¸¤ä¸ªç‰¹æ€§åˆ†åˆ«ä½œä¸ºå…¨å±€å˜é‡æ³¨å…¥åˆ° <code>globalThis</code> å’Œ <code>import.meta</code> ä¸­ã€‚</li><li>åœ¨æ„å»ºæ—¶ï¼Œè¿™ä¸¤ä¸ªç‰¹æ€§éƒ½ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œé™æ€æ›¿æ¢ã€‚</li></ul><p>è¿™å¯¼è‡´åœ¨å°è¯•è®¿é—®è¿™äº›å˜é‡æ—¶ï¼Œå¼€å‘å’Œæ„å»ºå­˜åœ¨ä¸€è‡´æ€§é—®é¢˜ï¼Œæœ‰æ—¶ç”šè‡³å¯¼è‡´æ„å»ºå¤±è´¥ã€‚ä¾‹å¦‚ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  define: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    __APP_VERSION__: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;1.0.0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { __APP_VERSION__ }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¼€å‘ï¼š{ __APP_VERSION__: &quot;1.0.0&quot; } âœ…</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ„å»ºï¼š{ &quot;1.0.0&quot; } âŒ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> docs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;I like import.meta.env.MODE&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¼€å‘ï¼š&quot;I like import.meta.env.MODE&quot; âœ…</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ„å»ºï¼š&quot;I like &quot;production&quot;&quot; âŒ</span></span></code></pre></div><p>Vite 5 é€šè¿‡åœ¨æ„å»ºä¸­ä½¿ç”¨ <code>esbuild</code> æ¥å¤„ç†æ›¿æ¢ï¼Œä½¿å…¶ä¸å¼€å‘è¡Œä¸ºä¿æŒä¸€è‡´ã€‚</p><p>è¿™ä¸ªæ”¹åŠ¨ä¸åº”è¯¥å½±å“å¤§éƒ¨åˆ†è®¾ç½®ï¼Œå› ä¸ºå·²ç»åœ¨æ–‡æ¡£ä¸­è¯´æ˜äº† <code>define</code> çš„å€¼åº”è¯¥éµå¾ª esbuild çš„è¯­æ³•ï¼š</p><blockquote><p>ä¸ºäº†ä¸ esbuild è¡Œä¸ºä¿æŒä¸€è‡´ï¼Œè¡¨è¾¾å¼å¿…é¡»æ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼ˆnullã€booleanã€numberã€stringã€array æˆ– objectï¼‰æˆ–ä¸€ä¸ªå•ä¸€æ ‡è¯†ç¬¦å­—ç¬¦ä¸²ã€‚</p></blockquote><p>ç„¶è€Œï¼Œå¦‚æœä½ æ›´å–œæ¬¢å¯¹å€¼ç›´æ¥ä½¿ç”¨é™æ€æ›¿æ¢ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://github.com/rollup/plugins/tree/master/packages/replace" target="_blank" rel="noreferrer"><code>@rollup/plugin-replace</code></a>ã€‚</p><h2 id="general-changes" tabindex="-1">å…¶ä»–ä¸€èˆ¬æ€§å˜åŒ– <a class="header-anchor" href="#general-changes" aria-label="Permalink to â€œå…¶ä»–ä¸€èˆ¬æ€§å˜åŒ–â€">â€‹</a></h2><h3 id="ssr-externalized-modules-value-now-matches-production" tabindex="-1">SSR å¤–éƒ¨æ¨¡å—å€¼ç°åœ¨ç¬¦åˆç”Ÿäº§ç¯å¢ƒè¡Œä¸º <a class="header-anchor" href="#ssr-externalized-modules-value-now-matches-production" aria-label="Permalink to â€œSSR å¤–éƒ¨æ¨¡å—å€¼ç°åœ¨ç¬¦åˆç”Ÿäº§ç¯å¢ƒè¡Œä¸ºâ€">â€‹</a></h3><p>åœ¨ Vite 4 ä¸­ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“çš„å¤–éƒ¨æ¨¡å—è¢«åŒ…è£…ä¸º <code>.default</code> å’Œ <code>.__esModule</code> å¤„ç†ï¼Œä»¥å®ç°æ›´å¥½çš„äº’æ“ä½œæ€§ï¼Œä½†æ˜¯å®ƒå¹¶ä¸ç¬¦åˆè¿è¡Œæ—¶ç¯å¢ƒï¼ˆä¾‹å¦‚ Node.jsï¼‰åŠ è½½æ—¶çš„ç”Ÿäº§ç¯å¢ƒè¡Œä¸ºï¼Œå¯¼è‡´éš¾ä»¥æ•è·çš„ä¸ä¸€è‡´æ€§ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ç›´æ¥çš„é¡¹ç›®ä¾èµ–éƒ½æ˜¯ SSR å¤–éƒ¨åŒ–çš„ã€‚</p><p>Vite 5 ç°åœ¨åˆ é™¤äº† <code>.default</code> å’Œ <code>.__esModule</code> å¤„ç†ï¼Œä»¥åŒ¹é…ç”Ÿäº§ç¯å¢ƒè¡Œä¸ºã€‚åœ¨å®è·µä¸­ï¼Œè¿™ä¸åº”å½±å“æ­£ç¡®æ‰“åŒ…çš„ä¾èµ–é¡¹ï¼Œä½†æ˜¯å¦‚æœä½ åœ¨åŠ è½½æ¨¡å—æ—¶é‡åˆ°æ–°çš„é—®é¢˜ï¼Œä½ å¯ä»¥å°è¯•ä»¥ä¸‹é‡æ„ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¹‹å‰ï¼š</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { foo } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;bar&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¹‹åï¼š</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _bar </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;bar&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _bar</span></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¹‹å‰ï¼š</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> foo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;bar&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¹‹åï¼š</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _foo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;bar&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> foo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _foo.default</span></span></code></pre></div><p>æ³¨æ„ï¼Œè¿™äº›æ›´æ”¹ç¬¦åˆ Node.js çš„è¡Œä¸ºï¼Œå› æ­¤ä¹Ÿå¯ä»¥åœ¨ Node.js ä¸­è¿è¡Œè¿™äº›å¯¼å…¥è¿›è¡Œæµ‹è¯•ã€‚å¦‚æœä½ æ›´å–œæ¬¢åšæŒä½¿ç”¨ä¹‹å‰çš„æ–¹å¼ï¼Œä½ å¯ä»¥å°† <code>legacy.proxySsrExternalModules</code> è®¾ç½®ä¸º <code>true</code>ã€‚</p><h3 id="worker-plugins-is-now-a-function" tabindex="-1"><code>worker.plugins</code> ç°åœ¨æ˜¯ä¸€ä¸ªå‡½æ•° <a class="header-anchor" href="#worker-plugins-is-now-a-function" aria-label="Permalink to â€œworker.plugins ç°åœ¨æ˜¯ä¸€ä¸ªå‡½æ•°â€">â€‹</a></h3><p>åœ¨ Vite 4 ä¸­ï¼Œ<a href="/config/worker-options.html#worker-plugins"><code>worker.plugins</code></a> æ¥å—ä¸€ä¸ªæ’ä»¶æ•°ç»„ (<code>(Plugin | Plugin[])[]</code>)ã€‚ä» Vite 5 å¼€å§‹ï¼Œå®ƒéœ€è¦é…ç½®ä¸ºä¸€ä¸ªè¿”å›æ’ä»¶æ•°ç»„çš„å‡½æ•° (<code>() =&gt; (Plugin | Plugin[])[]</code>)ã€‚è¿™ä¸ªæ”¹å˜æ˜¯ä¸ºäº†è®©å¹¶è¡Œçš„ worker æ„å»ºè¿è¡Œå¾—æ›´åŠ ä¸€è‡´å’Œå¯é¢„æµ‹ã€‚</p><h3 id="allow-path-containing-to-fallback-to-index-html" tabindex="-1">å…è®¸è·¯å¾„åŒ…å« <code>.</code> å›é€€åˆ° index.html <a class="header-anchor" href="#allow-path-containing-to-fallback-to-index-html" aria-label="Permalink to â€œå…è®¸è·¯å¾„åŒ…å« . å›é€€åˆ° index.htmlâ€">â€‹</a></h3><p>åœ¨ Vite 4 ä¸­ï¼Œå³ä½¿ <a href="/config/shared-options.html#apptype"><code>appType</code></a> è¢«è®¾ç½®ä¸º <code>&#39;SPA&#39;</code>ï¼ˆé»˜è®¤ï¼‰ï¼Œè®¿é—®åŒ…å« <code>.</code> çš„è·¯å¾„ä¹Ÿä¸ä¼šå›é€€åˆ° index.htmlã€‚ä» Vite 5 å¼€å§‹ï¼Œå®ƒå°†ä¼šå›é€€åˆ° index.htmlã€‚</p><p>æ³¨æ„æµè§ˆå™¨å°†ä¸å†åœ¨æ§åˆ¶å°ä¸­æ˜¾ç¤º 404 é”™è¯¯æ¶ˆæ¯ï¼Œå¦‚æœä½ å°†å›¾ç‰‡è·¯å¾„æŒ‡å‘ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶ï¼ˆä¾‹å¦‚ <code>&lt;img src=&quot;./file-does-not-exist.png&quot;&gt;</code>ï¼‰ã€‚</p><h3 id="align-dev-and-preview-html-serving-behaviour" tabindex="-1">Align dev and preview HTML serving behaviour <a class="header-anchor" href="#align-dev-and-preview-html-serving-behaviour" aria-label="Permalink to â€œAlign dev and preview HTML serving behaviourâ€">â€‹</a></h3><p>åœ¨ Vite 4 ä¸­ï¼Œå¼€å‘æœåŠ¡å™¨å’Œé¢„è§ˆæœåŠ¡å™¨ä¼šæ ¹æ® HTML çš„ç›®å½•ç»“æ„å’Œå°¾éƒ¨æ–œæ çš„ä¸åŒæ¥æä¾› HTMLã€‚è¿™ä¼šå¯¼è‡´åœ¨æµ‹è¯•æ„å»ºåçš„åº”ç”¨æ—¶å‡ºç°ä¸ä¸€è‡´çš„æƒ…å†µã€‚Vite 5 é‡æ„æˆäº†ä¸€ä¸ªå•ä¸€çš„è¡Œä¸ºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œç»™å®šä»¥ä¸‹æ–‡ä»¶ç»“æ„ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>â”œâ”€â”€ index.html</span></span>
<span class="line"><span>â”œâ”€â”€ file.html</span></span>
<span class="line"><span>â””â”€â”€ dir</span></span>
<span class="line"><span>    â””â”€â”€ index.html</span></span></code></pre></div><table tabindex="0"><thead><tr><th>è¯·æ±‚</th><th>è¿‡å¾€ç‰ˆæœ¬ (dev)</th><th>è¿‡å¾€ç‰ˆæœ¬ (preview)</th><th>ç°åœ¨ (dev &amp; preview)</th></tr></thead><tbody><tr><td><code>/dir/index.html</code></td><td><code>/dir/index.html</code></td><td><code>/dir/index.html</code></td><td><code>/dir/index.html</code></td></tr><tr><td><code>/dir</code></td><td><code>/index.html</code> (SPA fallback)</td><td><code>/dir/index.html</code></td><td><code>/index.html</code> (SPA fallback)</td></tr><tr><td><code>/dir/</code></td><td><code>/dir/index.html</code></td><td><code>/dir/index.html</code></td><td><code>/dir/index.html</code></td></tr><tr><td><code>/file.html</code></td><td><code>/file.html</code></td><td><code>/file.html</code></td><td><code>/file.html</code></td></tr><tr><td><code>/file</code></td><td><code>/index.html</code> (SPA fallback)</td><td><code>/file.html</code></td><td><code>/file.html</code></td></tr><tr><td><code>/file/</code></td><td><code>/index.html</code> (SPA fallback)</td><td><code>/file.html</code></td><td><code>/index.html</code> (SPA fallback)</td></tr></tbody></table><h3 id="manifest-files-are-now-generated-in-vite-directory-by-default" tabindex="-1">Manifest æ–‡ä»¶ç°åœ¨é»˜è®¤ç”Ÿæˆåˆ° <code>.vite</code> ç›®å½•ä¸­ <a class="header-anchor" href="#manifest-files-are-now-generated-in-vite-directory-by-default" aria-label="Permalink to â€œManifest æ–‡ä»¶ç°åœ¨é»˜è®¤ç”Ÿæˆåˆ° .vite ç›®å½•ä¸­â€">â€‹</a></h3><p>åœ¨ Vite 4 ä¸­ï¼Œmanifest æ–‡ä»¶ï¼ˆ<a href="/config/build-options.html#build-manifest"><code>build.manifest</code></a>ï¼Œ<a href="/config/build-options.html#build-ssrmanifest"><code>build.ssrManifest</code></a>ï¼‰é»˜è®¤ä¼šç”Ÿæˆåœ¨ <a href="/config/build-options.html#build-outdir"><code>build.outDir</code></a> çš„æ ¹ç›®å½•ä¸­ã€‚</p><p>ä» Vite 5 å¼€å§‹ï¼Œè¿™äº›æ–‡ä»¶å°†é»˜è®¤ç”Ÿæˆåœ¨ <code>build.outDir</code> ä¸­çš„ <code>.vite</code> ç›®å½•ä¸­ã€‚è¿™ä¸ªæ”¹å˜æœ‰åŠ©äºè§£å†³å½“å…¬å…±æ–‡ä»¶è¢«å¤åˆ¶åˆ° <code>build.outDir</code> æ—¶ï¼Œå…·æœ‰ç›¸åŒ manifest æ–‡ä»¶åæ—¶çš„å†²çªã€‚</p><h3 id="corresponding-css-files-are-not-listed-as-top-level-entry-in-manifest-json-file" tabindex="-1">å¯¹åº”çš„ CSS æ–‡ä»¶æœªåœ¨ manifest.json æ–‡ä»¶ä¸­ä½œä¸ºé¡¶çº§å…¥å£åˆ—å‡º <a class="header-anchor" href="#corresponding-css-files-are-not-listed-as-top-level-entry-in-manifest-json-file" aria-label="Permalink to â€œå¯¹åº”çš„ CSS æ–‡ä»¶æœªåœ¨ manifest.json æ–‡ä»¶ä¸­ä½œä¸ºé¡¶çº§å…¥å£åˆ—å‡ºâ€">â€‹</a></h3><p>åœ¨ Vite 4 ä¸­ï¼ŒJavaScript å…¥å£èµ·ç‚¹çš„å¯¹åº” CSS æ–‡ä»¶ä¹Ÿè¢«åˆ—ä¸ºäº† manifest æ–‡ä»¶çš„é¡¶çº§å…¥å£ï¼ˆ<a href="/config/build-options.html#build-manifest"><code>build.manifest</code></a>ï¼‰ã€‚è¿™äº›æ¡ç›®æ˜¯éæ•…æ„æ·»åŠ çš„ï¼Œä»…å¯¹ç®€å•æƒ…å†µæœ‰æ•ˆã€‚</p><p>åœ¨ Vite 5 ä¸­ï¼Œå¯¹åº”çš„ CSS æ–‡ä»¶åªèƒ½åœ¨ JavaScript å…¥å£èµ·ç‚¹ä¸­æ‰¾åˆ°ã€‚ åœ¨æ³¨å…¥ JS æ–‡ä»¶æ—¶ï¼Œå¯¹åº”çš„ CSS æ–‡ä»¶ <a href="/guide/backend-integration.html#text-if-production-link-rel-3d-stylesheet-href-3d-assets-manifest-main-js-css-script-type-3d-module-src-3d-assets-manifest-main-js-file-script">åº”è¢«æ³¨å…¥</a>ã€‚ å½“éœ€è¦å•ç‹¬æ³¨å…¥ CSS æ—¶ï¼Œå¿…éœ€å°†å…¶æ·»åŠ ä¸ºå•ç‹¬çš„å…¥å£èµ·ç‚¹ã€‚</p><h3 id="cli-shortcuts-require-an-additional-enter-press" tabindex="-1">CLI å¿«æ·åŠŸèƒ½é”®éœ€è¦ä¸€ä¸ªé¢å¤–çš„ <code>Enter</code> æŒ‰é”® <a class="header-anchor" href="#cli-shortcuts-require-an-additional-enter-press" aria-label="Permalink to â€œCLI å¿«æ·åŠŸèƒ½é”®éœ€è¦ä¸€ä¸ªé¢å¤–çš„ Enter æŒ‰é”®â€">â€‹</a></h3><p>CLI å¿«æ·åŠŸèƒ½é”®ï¼Œä¾‹å¦‚ <code>r</code> é‡å¯å¼€å‘æœåŠ¡å™¨ï¼Œç°åœ¨éœ€è¦é¢å¤–çš„ <code>Enter</code> æŒ‰é”®æ¥è§¦å‘å¿«æ·åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œ<code>r + Enter</code> é‡å¯å¼€å‘æœåŠ¡å™¨ã€‚</p><p>è¿™ä¸ªæ”¹åŠ¨é˜²æ­¢ Vite åå™¬å’Œæ§åˆ¶æ“ä½œç³»ç»Ÿç‰¹å®šçš„å¿«æ·é”®ï¼Œå…è®¸æ›´å¥½çš„å…¼å®¹æ€§ï¼Œå½“å°† Vite å¼€å‘æœåŠ¡å™¨ä¸å…¶ä»–è¿›ç¨‹ç»“åˆä½¿ç”¨æ—¶ï¼Œå¹¶é¿å…äº†<a href="https://github.com/vitejs/vite/pull/14342" target="_blank" rel="noreferrer">ä¹‹å‰çš„æ³¨æ„äº‹é¡¹</a>ã€‚</p><h3 id="update-experimentaldecorators-and-usedefineforclassfields-typescript-behaviour" tabindex="-1">Update <code>experimentalDecorators</code> and <code>useDefineForClassFields</code> TypeScript behaviour <a class="header-anchor" href="#update-experimentaldecorators-and-usedefineforclassfields-typescript-behaviour" aria-label="Permalink to â€œUpdate experimentalDecorators and useDefineForClassFields TypeScript behaviourâ€">â€‹</a></h3><p>Vite 5 ä½¿ç”¨ esbuild 0.19 å¹¶ç§»é™¤äº† esbuild 0.18 çš„å…¼å®¹å±‚ï¼Œè¿™æ”¹å˜äº† <a href="https://www.typescriptlang.org/tsconfig#experimentalDecorators" target="_blank" rel="noreferrer"><code>experimentalDecorators</code></a> å’Œ <a href="https://www.typescriptlang.org/tsconfig#useDefineForClassFields" target="_blank" rel="noreferrer"><code>useDefineForClassFields</code></a> çš„å¤„ç†æ–¹å¼ã€‚</p><ul><li><p><strong><code>useDefineForClassFields</code> é»˜è®¤ä¸å¯ç”¨</strong></p><p>ä½ éœ€è¦åœ¨ <code>tsconfig.json</code> ä¸­è®¾ç½® <code>compilerOptions.experimentalDecorators</code> ä¸º <code>true</code> æ¥ä½¿ç”¨è£…é¥°å™¨ã€‚</p></li><li><p><strong><code>useDefineForClassFields</code> é»˜è®¤ä¾èµ– TypeScript çš„ <code>target</code> å€¼</strong></p><p>å¦‚æœ <code>target</code> ä¸æ˜¯ <code>ESNext</code> æˆ– <code>ES2022</code> æˆ–æ›´æ–°çš„ç‰ˆæœ¬ï¼Œæˆ–è€…æ²¡æœ‰ <code>tsconfig.json</code> æ–‡ä»¶ï¼Œ<code>useDefineForClassFields</code> å°†é»˜è®¤ä¸º <code>false</code>ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´é»˜è®¤çš„ <code>esbuild.target</code> å€¼ <code>esnext</code> å‡ºç°é—®é¢˜ã€‚å®ƒå¯èƒ½ä¼šè½¬è¯‘ä¸º<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Static_initialization_blocks#browser_compatibility" target="_blank" rel="noreferrer">é™æ€åˆå§‹åŒ–å—</a>ï¼Œè¿™åœ¨ä½ çš„æµè§ˆå™¨ä¸­å¯èƒ½ä¸è¢«æ”¯æŒã€‚</p><p>å› æ­¤ï¼Œå»ºè®®åœ¨é…ç½® <code>tsconfig.json</code> æ—¶å°† <code>target</code> è®¾ç½®ä¸º <code>ESNext</code> æˆ– <code>ES2022</code> æˆ–æ›´æ–°çš„ç‰ˆæœ¬ï¼Œæˆ–è€…å°† <code>useDefineForClassFields</code> æ˜¾å¼åœ°è®¾ç½®ä¸º <code>true</code>ã€‚</p></li></ul><div class="language-jsonc"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // è‹¥è¦ä½¿ç”¨è£…é¥°å™¨å°±è®¾ä¸º true</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;experimentalDecorators&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å¦‚æœä½ åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°è§£æé”™è¯¯ï¼Œè¯·è®¾ç½®ä¸º true</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;useDefineForClassFields&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="remove-https-flag-and-https-true" tabindex="-1">ç§»é™¤ <code>--https</code> æ ‡å¿—å’Œ <code>https: true</code> <a class="header-anchor" href="#remove-https-flag-and-https-true" aria-label="Permalink to â€œç§»é™¤ --https æ ‡å¿—å’Œ https: trueâ€">â€‹</a></h3><p><code>--https</code> æ ‡å¿—ä¼šåœ¨å†…éƒ¨è®¾ç½® <code>server.https: true</code> å’Œ <code>preview.https: true</code>ã€‚è¿™ä¸ªé…ç½®æœ¬æ¥æ˜¯ä¸ºäº†ä¸è‡ªåŠ¨ https è¯ä¹¦ç”ŸæˆåŠŸèƒ½ä¸€èµ·ä½¿ç”¨çš„ï¼Œä½†æ˜¯è¿™ä¸ªåŠŸèƒ½åœ¨<a href="https://v3.vitejs.dev/guide/migration.html#automatic-https-certificate-generation" target="_blank" rel="noreferrer">Vite 3 ä¸­è¢«ç§»é™¤</a>ã€‚å› æ­¤ï¼Œè¿™ä¸ªé…ç½®å·²ç»ä¸å†æœ‰ç”¨ï¼Œå› ä¸ºå®ƒä¼šå¯åŠ¨ä¸€ä¸ªæ²¡æœ‰è¯ä¹¦çš„ Vite HTTPS æœåŠ¡å™¨ã€‚</p><p>å¦‚æœä½ ä½¿ç”¨ <a href="https://github.com/vitejs/vite-plugin-basic-ssl" target="_blank" rel="noreferrer"><code>@vitejs/plugin-basic-ssl</code></a> æˆ–è€… <a href="https://github.com/liuweiGL/vite-plugin-mkcert" target="_blank" rel="noreferrer"><code>vite-plugin-mkcert</code></a>ï¼Œå®ƒä»¬å·²ç»åœ¨å†…éƒ¨è®¾ç½®äº† <code>https</code> é…ç½®ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨ä½ çš„è®¾ç½®ä¸­ç§»é™¤ <code>--https</code>ï¼Œ<code>server.https: true</code>ï¼Œå’Œ<code>preview.https: true</code>ã€‚</p><h3 id="remove-resolvepackageentry-and-resolvepackagedata-apis" tabindex="-1">ç§»é™¤ <code>resolvePackageEntry</code> å’Œ <code>resolvePackageData</code> API <a class="header-anchor" href="#remove-resolvepackageentry-and-resolvepackagedata-apis" aria-label="Permalink to â€œç§»é™¤ resolvePackageEntry å’Œ resolvePackageData APIâ€">â€‹</a></h3><p><code>resolvePackageEntry</code> å’Œ <code>resolvePackageData</code> API å·²è¢«ç§»é™¤ï¼Œå› ä¸ºå®ƒä»¬æš´éœ²äº† Vite çš„å†…éƒ¨æœºåˆ¶ï¼Œå¹¶åœ¨è¿‡å»é˜»ç¢äº† Vite 4.3 çš„æ½œåœ¨ä¼˜åŒ–ã€‚è¿™äº› API å¯ä»¥è¢«ç¬¬ä¸‰æ–¹åŒ…æ›¿ä»£ï¼Œä¾‹å¦‚ï¼š</p><ul><li><code>resolvePackageEntry</code>: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/import.meta/resolve" target="_blank" rel="noreferrer"><code>import.meta.resolve</code></a> æˆ–è€… <a href="https://github.com/wooorm/import-meta-resolve" target="_blank" rel="noreferrer"><code>import-meta-resolve</code></a> åº“ã€‚</li><li><code>resolvePackageData</code>: ä¸ä¸Šè¿°ç›¸åŒï¼Œå‘ä¸Šçˆ¬å–åŒ…ç›®å½•ä»¥è·å–æ ¹ <code>package.json</code>ã€‚æˆ–è€…ä½¿ç”¨ç¤¾åŒºçš„ <a href="https://github.com/svitejs/vitefu" target="_blank" rel="noreferrer"><code>vitefu</code></a> åº“ã€‚</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { resolve } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;import-meta-resolve&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { findDepPkgJsonPath } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vitefu&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pkg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;my-lib&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> basedir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// `resolvePackageEntry`:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> packageEntry</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pkg, basedir)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// `resolvePackageData`:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> packageJsonPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findDepPkgJsonPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pkg, basedir)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> packageJson</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(packageJsonPath, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf-8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><h2 id="removed-deprecated-apis" tabindex="-1">ç§»é™¤éƒ¨åˆ†åºŸå¼ƒ API <a class="header-anchor" href="#removed-deprecated-apis" aria-label="Permalink to â€œç§»é™¤éƒ¨åˆ†åºŸå¼ƒ APIâ€">â€‹</a></h2><ul><li>CSS æ–‡ä»¶çš„é»˜è®¤å¯¼å‡ºï¼ˆä¾‹å¦‚ <code>import style from &#39;./foo.css&#39;</code>ï¼‰ï¼šä½¿ç”¨ <code>?inline</code> æŸ¥è¯¢å‚æ•°ä»£æ›¿</li><li><code>import.meta.globEager</code>ï¼šä½¿ç”¨ <code>import.meta.glob(&#39;*&#39;, { eager: true })</code> æ¥ä»£æ›¿</li><li><code>ssr.format: &#39;cjs&#39;</code> å’Œ <code>legacy.buildSsrCjsExternalHeuristics</code>ï¼ˆ<a href="https://github.com/vitejs/vite/discussions/13816" target="_blank" rel="noreferrer">#13816</a>ï¼‰</li><li><code>server.middlewareMode: &#39;ssr&#39;</code> å’Œ <code>server.middlewareMode: &#39;html&#39;</code>ï¼šä½¿ç”¨ <a href="/config/shared-options.html#apptype"><code>appType</code></a> + <a href="/config/server-options.html#server-middlewaremode"><code>server.middlewareMode: true</code></a> æ¥ä»£æ›¿ï¼ˆ<a href="https://github.com/vitejs/vite/pull/8452" target="_blank" rel="noreferrer">#8452</a>ï¼‰</li></ul><h2 id="advanced" tabindex="-1">è¿›é˜¶ <a class="header-anchor" href="#advanced" aria-label="Permalink to â€œè¿›é˜¶â€">â€‹</a></h2><p>ä¸‹åˆ—æ”¹åŠ¨ä»…ä¼šå½±å“åˆ°æ’ä»¶/å·¥å…·çš„ä½œè€…ï¼š</p><ul><li><a href="https://github.com/vitejs/vite/pull/14119" target="_blank" rel="noreferrer">[#14119] refactor!: merge <code>PreviewServerForHook</code> into <code>PreviewServer</code> type</a><ul><li>The <code>configurePreviewServer</code> hook now accepts the <code>PreviewServer</code> type instead of <code>PreviewServerForHook</code> type.</li></ul></li><li><a href="https://github.com/vitejs/vite/pull/14818" target="_blank" rel="noreferrer">[#14818] refactor(preview)!: use base middleware</a><ul><li>Middlewares added from the returned function in <code>configurePreviewServer</code> now does not have access to the <code>base</code> when comparing the <code>req.url</code> value. This aligns the behaviour with the dev server. You can check the <code>base</code> from the <code>configResolved</code> hook if needed.</li></ul></li><li><a href="https://github.com/vitejs/vite/pull/14834" target="_blank" rel="noreferrer">[#14834] fix(types)!: expose httpServer with Http2SecureServer union</a><ul><li><code>http.Server | http2.Http2SecureServer</code> is now used instead of <code>http.Server</code> where appropriate.</li></ul></li></ul><p>æ­¤å¤–ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›åªå½±å“å°‘æ•°ç”¨æˆ·çš„ç ´åæ€§å˜åŒ–ã€‚</p><ul><li><a href="https://github.com/vitejs/vite/pull/14098" target="_blank" rel="noreferrer">[#14098] fix!: avoid rewriting this (reverts #5312)</a><ul><li>ä¹‹å‰é¡¶å±‚ <code>this</code> å°†ä¼šåœ¨æ„å»ºæ—¶è¢«é»˜è®¤åœ°æ”¹å†™ä¸º <code>globalThis</code>ï¼Œè¿™ä¸ªè¡Œä¸ºç°åœ¨å·²è¢«ç§»é™¤</li></ul></li><li><a href="https://github.com/vitejs/vite/pull/14231" target="_blank" rel="noreferrer">[#14231] feat!: add extension to internal virtual modules</a><ul><li>å†…ç½®è™šæ‹Ÿæ¨¡å—çš„ id ç°åœ¨åŒ…å«ä¸€ä¸ªæ‰©å±•åï¼ˆ<code>.js</code>ï¼‰</li></ul></li><li><a href="https://github.com/vitejs/vite/pull/14583" target="_blank" rel="noreferrer">[#14583] refactor!: remove exporting internal APIs</a><ul><li>ç§»é™¤æ„å¤–å¯¼å‡ºçš„å†…éƒ¨ APIï¼š<code>isDepsOptimizerEnabled</code> å’Œ <code>getDepOptimizationConfig</code></li><li>ç§»é™¤å¯¼å‡ºçš„å†…éƒ¨ç±»å‹ï¼š<code>DepOptimizationResult</code>ï¼Œ<code>DepOptimizationProcessing</code> å’Œ <code>DepsOptimizer</code></li><li>æ”¹å <code>ResolveWorkerOptions</code> ç±»å‹ä¸º <code>ResolvedWorkerOptions</code></li></ul></li><li><a href="https://github.com/vitejs/vite/pull/5657" target="_blank" rel="noreferrer">[#5657] fix: return 404 for resources requests outside the base path</a><ul><li>è¿‡å»ï¼ŒVite å¯¹äºä¸å¸¦ <code>Accept: text/html</code> çš„è¯·æ±‚ï¼Œä¼šå°†å…¶å½“ä½œå¸¦æœ‰åŸºç¡€è·¯å¾„çš„è¯·æ±‚æ¥å¤„ç†ã€‚ç°åœ¨ Vite ä¸å†è¿™æ ·åšï¼Œè€Œæ˜¯è¿”å› 404ã€‚</li></ul></li><li><a href="https://github.com/vitejs/vite/pull/14723" target="_blank" rel="noreferrer">[#14723] fix(resolve)!: remove special .mjs handling</a><ul><li>åœ¨è¿‡å»ï¼Œå½“ä¸€ä¸ªåº“çš„ <code>&quot;exports&quot;</code> å­—æ®µæ˜ å°„åˆ°ä¸€ä¸ª <code>.mjs</code> æ–‡ä»¶æ—¶ï¼ŒVite ä»ç„¶ä¼šå°è¯•åŒ¹é… <code>&quot;browser&quot;</code> å’Œ <code>&quot;module&quot;</code> å­—æ®µï¼Œä»¥ä¿®å¤ä¸æŸäº›åº“çš„å…¼å®¹æ€§ã€‚ç°åœ¨ï¼Œè¿™ç§è¡Œä¸ºå·²è¢«ç§»é™¤ï¼Œä»¥ä¾¿ä¸å¯¼å‡ºè§£æç®—æ³•ä¿æŒä¸€è‡´ã€‚</li></ul></li><li><a href="https://github.com/vitejs/vite/pull/14733" target="_blank" rel="noreferrer">[#14733] feat(resolve)!: remove <code>resolve.browserField</code></a><ul><li><code>resolve.browserField</code> å·²ä» Vite 3 å¼€å§‹è¢«å¼ƒç”¨ï¼Œè€Œæ˜¯ä½¿ç”¨ <a href="/config/shared-options.html#resolve-mainfields"><code>resolve.mainFields</code></a> çš„æ›´æ–°é»˜è®¤å€¼ <code>[&#39;browser&#39;, &#39;module&#39;, &#39;jsnext:main&#39;, &#39;jsnext&#39;]</code>ã€‚</li></ul></li><li><a href="https://github.com/vitejs/vite/pull/14855" target="_blank" rel="noreferrer">[#14855] feat!: add isPreview to ConfigEnv and resolveConfig</a><ul><li>åœ¨ <code>ConfigEnv</code> å¯¹è±¡ä¸­ï¼Œé‡å‘½å <code>ssrBuild</code> ä¸º <code>isSsrBuild</code>ã€‚</li></ul></li><li><a href="https://github.com/vitejs/vite/pull/14945" target="_blank" rel="noreferrer">[#14945] fix(css): correctly set manifest source name and emit CSS file</a><ul><li>CSS æ–‡ä»¶åç°åœ¨æ˜¯åŸºäº chunk åç”Ÿæˆçš„ã€‚</li></ul></li></ul><h2 id="migration-from-v3" tabindex="-1">ä» v3 è¿ç§» <a class="header-anchor" href="#migration-from-v3" aria-label="Permalink to â€œä» v3 è¿ç§»â€">â€‹</a></h2><p>è¯·å…ˆæŸ¥çœ‹ <a href="/guide/migration-from-v3.html">ä» v3 è¿ç§»æŒ‡å—</a> æ–‡æ¡£æŸ¥çœ‹å¯¹æ‚¨çš„åº”ç”¨æ‰€æœ‰éœ€è¦è¿ç§»çš„æ”¹åŠ¨ï¼Œç„¶åå†æ‰§è¡Œæœ¬ç¯‡æŒ‡å—æ‰€è¿°çš„æ”¹åŠ¨ã€‚</p></div></div></main><footer class="VPDocFooter" data-v-0cec5931 data-v-10405ff0><!--[--><!--]--><div class="edit-info" data-v-10405ff0><div class="edit-link" data-v-10405ff0><span class="VPLink no-icon edit-link-button" data-v-10405ff0><!--[--><span class="vpi-square-pen edit-link-icon" data-v-10405ff0></span> ä¸ºæ­¤é¡µæä¾›ä¿®æ”¹å»ºè®®<!--]--></span></div><!----></div><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter" data-v-f1c65288 data-v-fb49d3cc><div class="container" data-v-fb49d3cc><p class="message" data-v-fb49d3cc>Released under the MIT License. (dev)</p><p class="copyright" data-v-fb49d3cc>Copyright Â© 2025-present CrazyPig AI Team.</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"blog.md\":\"kGyGpUDn\",\"blog_announcing-vite1-1.md\":\"CcJzlRO3\",\"blog_announcing-vite1.md\":\"BtfPt8dc\",\"blog_announcing-vite2.md\":\"BVvvW63Q\",\"changes_hotupdate-hook.md\":\"Behd762_\",\"changes_index.md\":\"CDRFYlWP\",\"changes_per-environment-apis.md\":\"CxpI-BhP\",\"changes_shared-plugins-during-build.md\":\"BvYLhhnp\",\"changes_ssr-using-modulerunner.md\":\"BMIFCdGe\",\"changes_this-environment-in-hooks.md\":\"BUgaGpDf\",\"config_build-options.md\":\"SqyMCk8P\",\"config_dep-optimization-options.md\":\"xWexFqy4\",\"config_index.md\":\"B5i8_43P\",\"config_preview-options.md\":\"9Z2GdCq9\",\"config_server-options.md\":\"FLKd6AQW\",\"config_shared-options.md\":\"D6RJWQaP\",\"config_ssr-options.md\":\"DofCifwI\",\"config_worker-options.md\":\"BWPEF8w-\",\"deploy_host.md\":\"zxSAwnpO\",\"deploy_index.md\":\"BU5TR01p\",\"deploy_karing.md\":\"BrZACsZa\",\"deploy_static-deploy.md\":\"DsKU-7Nt\",\"guide_api-environment-frameworks.md\":\"BclhId3Q\",\"guide_api-environment-instances.md\":\"BSSogBaQ\",\"guide_api-environment-plugins.md\":\"Dy8afpVo\",\"guide_api-environment-runtimes.md\":\"Dd0tDqKp\",\"guide_api-environment.md\":\"DIrtx44f\",\"guide_api-hmr.md\":\"yz0NoKii\",\"guide_api-javascript.md\":\"BcwIk-3V\",\"guide_api-plugin.md\":\"B2Dw1-Wt\",\"guide_api-vite-runtime.md\":\"BSzEf4-t\",\"guide_assets.md\":\"B-DzHZH8\",\"guide_backend-integration.md\":\"DkLfbZws\",\"guide_build.md\":\"7oTCSuwe\",\"guide_cli.md\":\"tPd9j72-\",\"guide_comparisons.md\":\"DCjqyAcN\",\"guide_dep-pre-bundling.md\":\"Crmtp-2H\",\"guide_env-and-mode.md\":\"Cdv6fHQa\",\"guide_features.md\":\"DBHUzbPb\",\"guide_index.md\":\"D4Zugfet\",\"guide_migration-from-v1.md\":\"CxnJ2Vji\",\"guide_migration-from-v2.md\":\"BZR1ZEVl\",\"guide_migration-from-v3.md\":\"CxmPhLGT\",\"guide_migration-from-v4.md\":\"DlycDAjI\",\"guide_migration-from-v5.md\":\"CfP73MOU\",\"guide_migration.md\":\"8VaM2kCq\",\"guide_performance.md\":\"BB2kTQTA\",\"guide_philosophy.md\":\"DYi5Kp6F\",\"guide_rolldown.md\":\"DyYcwGL8\",\"guide_ssr.md\":\"BJN1ddkx\",\"guide_static-deploy.md\":\"De6Qre7w\",\"guide_troubleshooting.md\":\"VsFESgjE\",\"guide_using-plugins.md\":\"DBY8vlyj\",\"guide_why.md\":\"Dd9sYPsw\",\"index.md\":\"NcDnhDWw\",\"plugins_index.md\":\"DgBcKSJS\",\"readme.md\":\"UAqBQ0Wt\",\"releases.md\":\"7IT3lD7v\",\"team.md\":\"vm-mYsPA\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"ç–¯çŒªAI\",\"description\":\"ç–¯çŒªAI\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo.svg\",\"editLink\":{\"text\":\"ä¸ºæ­¤é¡µæä¾›ä¿®æ”¹å»ºè®®\"},\"outline\":{\"label\":\"æœ¬é¡µç›®å½•\",\"level\":[2,3]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com\"},{\"icon\":\"gitee\",\"link\":\"https://gitee.com/\"},{\"icon\":\"discourse\",\"link\":\"https://linux.do/\"},{\"icon\":\"docker\",\"link\":\"https://www.docker.com/\"},{\"icon\":\"google\",\"link\":\"https://www.google.com/\"},{\"icon\":\"x\",\"link\":\"https://x.com/\"},{\"icon\":\"mastodon\",\"link\":\"https://elk.zone/\"},{\"icon\":\"cloudflare\",\"link\":\"https://dash.cloudflare.com/\"}],\"search\":{\"provider\":\"local\",\"options\":{\"translations\":{\"button\":{\"buttonText\":\"æœç´¢\",\"buttonAriaLabel\":\"æœç´¢\"},\"modal\":{\"footer\":{\"selectText\":\"é€‰æ‹©\",\"navigateText\":\"åˆ‡æ¢\",\"closeText\":\"å…³é—­\"}}}}},\"docFooter\":{\"prev\":\"ä¸Šä¸€é¡µ\",\"next\":\"ä¸‹ä¸€é¡µ\"},\"footer\":{\"message\":\"Released under the MIT License. (dev)\",\"copyright\":\"Copyright Â© 2025-present CrazyPig AI Team.\"},\"nav\":[{\"text\":\"ğŸŒˆé¦–é¡µ\",\"link\":\"/\"},{\"text\":\"ğŸš€å¸®åŠ©æ–‡æ¡£\",\"link\":\"/deploy/\",\"activeMatch\":\"/deploy/\"},{\"text\":\"ğŸ› ï¸ç›¸å…³é“¾æ¥\",\"items\":[{\"text\":\"å›¢é˜Ÿæˆå‘˜\",\"link\":\"/team\"},{\"text\":\"æœ€æ–°åšå®¢\",\"link\":\"/blog\"},{\"text\":\"å‘å¸ƒç­–ç•¥\",\"link\":\"/releases\"},{\"text\":\"youtube\",\"link\":\"https://www.youtube.com\"}]}],\"sidebar\":{\"/deploy/\":[{\"text\":\"ğŸ”…ç¯å¢ƒ\",\"items\":[{\"text\":\"åŸŸåèµ„æº\",\"link\":\"/deploy/\"},{\"text\":\"ä¸»æœºèµ„æº\",\"link\":\"/deploy/host\"},{\"text\":\"æ¢¯å­èµ„æº\",\"link\":\"/deploy/static-deploy\"},{\"text\":\"èµ„æºç›‘æ§\",\"link\":\"https://github.com/louislam/uptime-kuma\"}]},{\"text\":\"âœ¨å·¥å…·\",\"items\":[{\"text\":\"æç¤ºè¯ä¼˜åŒ–å™¨\",\"link\":\"https://github.com/linshenkx/prompt-optimizer\"},{\"text\":\"austinæ¶ˆæ¯æ¨é€\",\"link\":\"http://github.com/ZhongFuCheng3y/austin-admin.git\"},{\"text\":\"Stirling PDF\",\"link\":\"https://github.com/Stirling-Tools/Stirling-PDF\"}]},{\"text\":\"ğŸ”¥MCP\",\"items\":[{\"text\":\"MCP GATEWAY\",\"link\":\"https://github.com/AmoyLab/Unla\"},{\"text\":\"12306\",\"link\":\"http://github.com/shenpeiheng/mcp-server-chinarailway.git\"}]},{\"text\":\"ğŸ‰DB\",\"items\":[{\"text\":\"Chat2DB\",\"link\":\"https://github.com/CodePhiliaX/Chat2DB\"},{\"text\":\"Supabase\",\"link\":\"https://github.com/supabase/supabase\"}]},{\"text\":\"ğŸ”¨è¿ç»´ç®¡ç†\",\"items\":[{\"text\":\"Jenkins\",\"link\":\"https://www.jenkins.io/\"},{\"text\":\"Portainer\",\"link\":\"https://www.portainer.io/\"},{\"text\":\"Harbor\",\"link\":\"https://goharbor.io/\"},{\"text\":\"Dify\",\"link\":\"https://dify.ai/\"},{\"text\":\"Coze\",\"link\":\"https://www.coze.cn/\"}]},{\"text\":\"ğŸ„åœ¨çº¿å¼€å‘å·¥å…·\",\"items\":[{\"text\":\"Vscode\",\"link\":\"https://code.visualstudio.com/\"},{\"text\":\"Jetbrains\",\"link\":\"https://github.com/JetBrains/projector-docker.git\"},{\"text\":\"coder\",\"link\":\"https://coder.com/\"}]},{\"text\":\"ğŸ“£åœ¨çº¿ç”»å›¾å·¥å…·\",\"items\":[{\"text\":\"Excalidraw\",\"link\":\"https://excalidraw.com/\"},{\"text\":\"Mermaid\",\"link\":\"https://mermaid.live/edit\"},{\"text\":\"PlantUML\",\"link\":\"https://plantuml.com/zh/\"},{\"text\":\"Drawio\",\"link\":\"https://app.diagrams.net/\"}]}]}},\"locales\":{\"root\":{\"label\":\"ç®€ä½“ä¸­æ–‡\"},\"en\":{\"label\":\"English\",\"link\":\"/\"},\"ja\":{\"label\":\"æ—¥æœ¬èª\",\"link\":\"/\"},\"es\":{\"label\":\"EspaÃ±ol\",\"link\":\"/\"},\"pt\":{\"label\":\"PortuguÃªs\",\"link\":\"/\"},\"ko\":{\"label\":\"í•œêµ­ì–´\",\"link\":\"/\"},\"de\":{\"label\":\"Deutsch\",\"link\":\"/\"},\"fa\":{\"label\":\"ÙØ§Ø±Ø³ÛŒ\",\"link\":\"/\"}},\"scrollOffset\":134,\"cleanUrls\":false,\"additionalConfig\":{}}");</script>
    
  </body>
</html>